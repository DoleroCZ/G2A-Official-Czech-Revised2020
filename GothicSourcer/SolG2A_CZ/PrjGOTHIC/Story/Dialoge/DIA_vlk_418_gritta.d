
instance DIA_GRITTA_EXIT(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 999;
	condition = dia_gritta_exit_condition;
	information = dia_gritta_exit_info;
	permanent = TRUE;
	description = DIALOG_ENDE;
};


func int dia_gritta_exit_condition()
{
	if(KAPITEL <= 2)
	{
		return TRUE;
	};
};

func void dia_gritta_exit_info()
{
	AI_StopProcessInfos(self);
};


instance DIA_GRITTA_PICKPOCKET(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 900;
	condition = dia_gritta_pickpocket_condition;
	information = dia_gritta_pickpocket_info;
	permanent = TRUE;
	description = PICKPOCKET_20_FEMALE;
};


func int dia_gritta_pickpocket_condition()
{
	return c_beklauen(20,20);
};

func void dia_gritta_pickpocket_info()
{
	Info_ClearChoices(dia_gritta_pickpocket);
	Info_AddChoice(dia_gritta_pickpocket,DIALOG_BACK,dia_gritta_pickpocket_back);
	Info_AddChoice(dia_gritta_pickpocket,DIALOG_PICKPOCKET,dia_gritta_pickpocket_doit);
};

func void dia_gritta_pickpocket_doit()
{
	b_beklauen();
	Info_ClearChoices(dia_gritta_pickpocket);
};

func void dia_gritta_pickpocket_back()
{
	Info_ClearChoices(dia_gritta_pickpocket);
};


instance DIA_GRITTA_HELLO(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 10;
	condition = dia_gritta_hello_condition;
	information = dia_gritta_hello_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_gritta_hello_condition()
{
	if(Npc_IsInState(self,zs_talk) && (self.aivar[AIV_TALKEDTOPLAYER] == FALSE))
	{
		return TRUE;
	};
};

func void dia_gritta_hello_info()
{
	AI_Output(self,other,"DIA_Gritta_Hello_16_00");	//Co chceö, cizinËe? Jestli jsi p¯iöel ûebrat, pak tÏ musÌm zklamat - jsem jenom chud· vdova.
	AI_Output(self,other,"DIA_Gritta_Hello_16_01");	//Jmenuji se Gritta. Od tÈ doby, co mi zem¯el manûel, vedu dom·cnost svÈmu str˝ci Thorbenovi.
};


instance DIA_GRITTA_WANTSMONEY(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 2;
	condition = dia_gritta_wantsmoney_condition;
	information = dia_gritta_wantsmoney_info;
	permanent = FALSE;
	description = "PosÌl· mÏ Matteo, pr˝ mu st·le dluûÌö nÏjakÈ penÌze.";
};


func int dia_gritta_wantsmoney_condition()
{
	if(MIS_MATTEO_GOLD == LOG_RUNNING)
	{
		return TRUE;
	};
};


var int gritta_wantpay;
var int gritta_threatened;

func void dia_gritta_wantsmoney_info()
{
	AI_Output(other,self,"DIA_Gritta_WantsMoney_15_00");	//PosÌl· mÏ Matteo, pr˝ mu st·le dluûÌö nÏjakÈ penÌze.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_16_01");	//On chce svÈ penÌze? A proË? ZboûÌ, kterÈ mi dodal, bylo vadnÈ, öpatnÏ utkanÈ a jeötÏ h˘¯e seöitÈ.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_16_02");	//A vidÏl jsi ty barvy? V˘bec se nepodobaly tÏm, jakÈ jsem si objednala! Je to podvod, nic jinÈho!
	AI_Output(self,other,"DIA_Gritta_WantsMoney_16_03");	//ÿeknu ti, ûe kdyby byl naûivu m˘j muû, Matteo by si nikdy nic takovÈho nedovolil. Ach, m˘j uboh˝ manûel...
	Info_ClearChoices(dia_gritta_wantsmoney);
	Info_AddChoice(dia_gritta_wantsmoney,"Nech toho. Kde jsou ty prachy?",dia_gritta_wantsmoney_wheremoney);
	Info_AddChoice(dia_gritta_wantsmoney,"PokraËovat...",dia_gritta_wantsmoney_continue01);
};

func void dia_gritta_wantsmoney_continue01()
{
	AI_Output(self,other,"DIA_Gritta_WantsMoney_continue01_16_00");	//...byl to takov˝ dobr·k. Pohledn˝, pracovit˝ a dûentlmen ze starÈ ökoly. Nic n·m nechybÏlo - byli jsme bohatÌ a öùastnÌ...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue01_16_01");	//...obËas n·s dokonce zvali i do lepöÌ spoleËnosti. SamÈ slavnosti, kr·snÈ öaty a ˙Ëesy...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue01_16_02");	//...vybran· jÌdla a zdvo¯il· konverzace. Vöechno bylo tenkr·t lepöÌ. Tehdy by si nikdo nedovolil ur·ûet nebohou vdovu takov˝mi...
	Info_ClearChoices(dia_gritta_wantsmoney);
	Info_AddChoice(dia_gritta_wantsmoney,"Nech toho. Kde jsou ty prachy?",dia_gritta_wantsmoney_wheremoney);
	Info_AddChoice(dia_gritta_wantsmoney,"PokraËovat...",dia_gritta_wantsmoney_continue02);
};

func void dia_gritta_wantsmoney_continue02()
{
	AI_Output(self,other,"DIA_Gritta_WantsMoney_continue02_16_00");	//...smÏön˝mi tvrzenÌmi. Co si jen poËnu? Moje renta staËÌ jen taktak na p¯eûitÌ a Ëasy jsou ËÌm d·l horöÌ. Je to vidÏt vöude...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue02_16_01");	//...lidÈ musÌ öet¯it, ökudlit a utahovat opasky. Uû celÈ t˝dny do mÏsta nedorazila û·dn· loÔ. M˘j muû b˝val kapit·nem obchodnÌ lodi - vlastnÏ ji z·roveÚ i vlastnil...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue02_16_02");	//...ze sv˝ch cest mi vûdycky vozil d·rky - n·dhernÈ l·tky z pevniny, vz·cnÈ ko¯enÌ z jiûnÌch zemÌ...
	Info_ClearChoices(dia_gritta_wantsmoney);
	Info_AddChoice(dia_gritta_wantsmoney,"Nech toho. Kde jsou ty prachy?",dia_gritta_wantsmoney_wheremoney);
	Info_AddChoice(dia_gritta_wantsmoney,"PokraËovat...",dia_gritta_wantsmoney_continue03);
};

func void dia_gritta_wantsmoney_continue03()
{
	AI_Output(self,other,"DIA_Gritta_WantsMoney_continue03_16_00");	//...vÏtöina lidÌ o podobn˝ch vÏcech nikdy neslyöela. Ale jednoho dne jsem dostala zpr·vu, ûe Gritta se potopila - ano, naöe loÔ nesla toto jmÈno, m˘j muû tÌm d·val najevo...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue03_16_01");	//...l·sku, jakou ke mnÏ choval. Plakala jsem a modlila se, aby m˘j drah˝ to neötÏstÌ p¯eûil, kaûd˝ den jsem doufala, ûe o nÏm t¯eba uslyöÌm, ale m· touha byla marn·...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue04_16_02");	//...kÈû se Innos smiluje nad jeho duöÌ. Aù odpoËÌv· v pokoji. Od tÈ doby tu p¯eb˝v·m v tÏchto skromn˝ch podmÌnk·ch, a teÔ mÏ ten bezcitn˝, bezohledn˝ Matteo...
	AI_Output(self,other,"DIA_Gritta_WantsMoney_Continue04_16_03");	//...chce p¯ipravit o poslednÌ zbyteËek m˝ch celoûivotnÌch ˙spor. ProsÌm, smiluj se nad ubohou ûenou. Kdyby byl naûivu m˘j muû, nikdy by si nic takovÈho nedovolil. Ach, m˘j uboh˝ manûel...
	Info_ClearChoices(dia_gritta_wantsmoney);
	Info_AddChoice(dia_gritta_wantsmoney,"P¯estaÚ s tÌm. Kde je to zlato?",dia_gritta_wantsmoney_wheremoney);
	Info_AddChoice(dia_gritta_wantsmoney,"PokraËovat...",dia_gritta_wantsmoney_continue01);
};

func void dia_gritta_wantsmoney_wheremoney()
{
	AI_Output(other,self,"DIA_Gritta_WantsMoney_WhereMoney_15_00");	//P¯estaÚ s tÌm. Kde je to zlato?
	AI_Output(self,other,"DIA_Gritta_WantsMoney_WhereMoney_16_01");	//(vzdorovitÏ) Ale j· to zlato nem·m, jsem jenom chud· vdova!
	Info_ClearChoices(dia_gritta_wantsmoney);
	Info_AddChoice(dia_gritta_wantsmoney,"Naval praöule, nebo ti jednu vlepÌm!",dia_gritta_wantsmoney_beatup);
	Info_AddChoice(dia_gritta_wantsmoney,"Tak to asi budeme muset prodat nÏjak˝ tv˘j majetek...",dia_gritta_wantsmoney_enoughstuff);
	Info_AddChoice(dia_gritta_wantsmoney,"Tak j· tu sumu zaplatÌm za tebe.",dia_gritta_wantsmoney_iwillpay);
};

func void dia_gritta_wantsmoney_enoughstuff()
{
	AI_Output(other,self,"DIA_Gritta_WantsMoney_EnoughStuff_15_00");	//Tak prostÏ prodej p·r tÏch sv˝ch had¯Ìk˘. UrËitÏ jich m·ö ve sk¯Ìni celou hromadu.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_EnoughStuff_16_01");	//Jak se opovaûujeö, ty nevychovanËe! No tak dob¯e, tady m·ö to zlato.
	b_giveinvitems(self,other,itmi_gold,100);
	AI_Output(other,self,"DIA_Gritta_WantsMoney_EnoughStuff_15_02");	//(˙öklebek) Vida, ani to nebolelo.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_EnoughStuff_16_03");	//(jedovatÏ) A teÔ prosÌm odejdi z mÈho domu.
	GRITTA_GOLDGIVEN = TRUE;
	AI_StopProcessInfos(self);
};

func void dia_gritta_wantsmoney_iwillpay()
{
	AI_Output(other,self,"DIA_Gritta_WantsMoney_IWillPay_15_00");	//Tak j· tu sumu zaplatÌm za tebe.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_IWillPay_16_01");	//Opravdu bys to pro mÏ udÏlal? Ach, j· vÏdÏla, ûe nejsi takov˝ nenaûran˝ hajzl jako Matteo!
	AI_Output(other,self,"DIA_Gritta_WantsMoney_IWillPay_15_02");	//No jo, to nic.
	AI_Output(self,other,"DIA_Gritta_WantsMoney_IWillPay_16_03");	//Vraù se, aû to za¯ÌdÌö - chci se ti nÏjak odvdÏËit.
	Info_ClearChoices(dia_gritta_wantsmoney);
	GRITTA_WANTPAY = TRUE;
};

func void dia_gritta_wantsmoney_beatup()
{
	AI_Output(other,self,"DIA_Gritta_WantsMoney_BeatUp_15_00");	//(hrozivÏ) Naval prachy, nebo ti jednu vlepÌm!
	AI_Output(self,other,"DIA_Gritta_WantsMoney_BeatUp_16_01");	//(vyz˝vavÏ) Jsi jenom prachsprost˝ lump. Jen pojÔ, vytas zbraÚ a j· zavol·m str·ûe!
	GRITTA_THREATENED = TRUE;
	AI_StopProcessInfos(self);
};


instance DIA_GRITTA_WINE(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 2;
	condition = dia_gritta_wine_condition;
	information = dia_gritta_wine_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_gritta_wine_condition()
{
	if(Npc_IsInState(self,zs_talk) && (GRITTA_WANTPAY == TRUE) && (MIS_MATTEO_GOLD == LOG_SUCCESS) && (Npc_HasItems(self,itmi_gold) >= 100))
	{
		return TRUE;
	};
};

func void dia_gritta_wine_info()
{
	AI_Output(self,other,"DIA_Gritta_WINE_16_00");	//To od tebe bylo opravdu ölechetnÈ, ûes to za mÏ zaplatil. ChtÏla bych se ti nÏjak odmÏnit.
	AI_Output(self,other,"DIA_Gritta_WINE_16_01");	//Tuhle l·hev vÌna mi manûel - nechù Innos dop¯eje pokoj jeho duöi - p¯ivezl z jiûnÌch ostrov˘.
	AI_Output(self,other,"DIA_Gritta_WINE_16_02");	//TakÈ jsem to vöude rozhl·sila. AspoÚ nÏkdo tu m· v tÏle kouska cti.
	AI_Output(other,self,"DIA_Gritta_WINE_15_03");	//No jo, to nic.
	b_giveplayerxp(XP_PAYFORGRITTA);
	b_giveinvitems(self,other,itfo_wine,1);
	AI_StopProcessInfos(self);
};


instance DIA_GRITTA_PERM(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 3;
	condition = dia_gritta_perm_condition;
	information = dia_gritta_perm_info;
	permanent = TRUE;
	important = TRUE;
};


func int dia_gritta_perm_condition()
{
	if(Npc_IsInState(self,zs_talk) && Npc_KnowsInfo(other,dia_gritta_wantsmoney) && (KAPITEL < 3))
	{
		return TRUE;
	};
};

func void dia_gritta_perm_info()
{
	if(Npc_KnowsInfo(other,dia_gritta_wine) && (Npc_HasItems(self,itmi_gold) >= 100))
	{
		AI_Output(self,other,"DIA_Gritta_PERM_16_00");	//Dokud jsou ve mÏstÏ muûi jako ty, st·le mohu v srdci chovat nadÏji, ûe se vöe v dobrÈ obr·tÌ.
	}
	else if((GRITTA_WANTPAY == TRUE) && (Npc_HasItems(self,itmi_gold) >= 100))
	{
		AI_Output(self,other,"DIA_Gritta_PERM_16_01");	//Vraù se, aû urovn·ö tu z·leûitost s Matteem.
	}
	else if((GRITTA_THREATENED == TRUE) && (Npc_HasItems(self,itmi_gold) >= 100))
	{
		AI_Output(self,other,"DIA_Gritta_PERM_16_02");	//Co na mÏ tak blbÏ ËumÌö? StejnÏ si na mÏ netroufneö za˙toËit!
	}
	else
	{
		AI_Output(self,other,"DIA_Gritta_PERM_16_03");	//Co jeötÏ chceö? Moje zlato jsi uû dostal, tak vypadni!
	};
	AI_StopProcessInfos(self);
};


instance DIA_GRITTA_KAP3_EXIT(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 999;
	condition = dia_gritta_kap3_exit_condition;
	information = dia_gritta_kap3_exit_info;
	permanent = TRUE;
	description = DIALOG_ENDE;
};


func int dia_gritta_kap3_exit_condition()
{
	if(KAPITEL >= 3)
	{
		return TRUE;
	};
};

func void dia_gritta_kap3_exit_info()
{
	AI_StopProcessInfos(self);
};


var int grittaxp_once;

instance DIA_GRITTA_PERM3U4U5(C_INFO)
{
	npc = vlk_418_gritta;
	nr = 31;
	condition = dia_gritta_perm3u4u5_condition;
	information = dia_gritta_perm3u4u5_info;
	permanent = TRUE;
	description = "Jak se vede?";
};


func int dia_gritta_perm3u4u5_condition()
{
	return TRUE;
};

func void dia_gritta_perm3u4u5_info()
{
	AI_Output(other,self,"DIA_Gritta_Perm3U4U5_15_00");	//Jak se vede?
	if(KAPITEL == 3)
	{
		if(MIS_RESCUEBENNET != LOG_SUCCESS)
		{
			AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_01");	//Vöecko jde od desÌti k pÏti. Aù se podÌv·ö, kam se podÌv·ö, vöude vl·dne zloËin a n·silÌ. Jen si p¯edstav - dokonce zabili jednoho z paladin˘!
			Info_ClearChoices(dia_gritta_perm3u4u5);
			Info_AddChoice(dia_gritta_perm3u4u5,DIALOG_BACK,dia_gritta_perm3u4u5_back);
			Info_AddChoice(dia_gritta_perm3u4u5,"To je v·lka - takovÈ vÏci se st·vajÌ.",dia_gritta_perm3u4u5_war);
			Info_AddChoice(dia_gritta_perm3u4u5,"To bude v po¯·dku.",dia_gritta_perm3u4u5_turnsgood);
			Info_AddChoice(dia_gritta_perm3u4u5,"Co jsi zaslechla?",dia_gritta_perm3u4u5_rumors);
		}
		else
		{
			AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_02");	//Ach, lord Hagen toho ûold·ka pustil - to mÏ tak dojalo!
			AI_Output(other,self,"DIA_Gritta_Perm3U4U5_15_03");	//A co to m· spoleËnÈho s tebou?
			AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_04");	//Jen se nad tÌm zamysli. VÏ¯Ìö, ûe by ûold·ci jen tak st·li a dÌvali se, jak jim vÏöÌ kamar·da?
			AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_05");	//UrËitÏ by se ho pokusili osvobodit, a z toho by koukalo po¯·dnÈ krveprolitÌ. Mohu tedy pouze dÏkovat Innosovi.
		};
	}
	else if(KAPITEL == 5)
	{
		AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_06");	//PaladinovÈ jsou p¯ipraveni a vypad· to, ûe se brzy vydajÌ na cestu.
	}
	else
	{
		AI_Output(self,other,"DIA_Gritta_Perm3U4U5_16_07");	//Vöechno p¯i starÈm, ale nechci si stÏûovat.
	};
};

func void dia_gritta_perm3u4u5_back()
{
	Info_ClearChoices(dia_gritta_perm3u4u5);
};

func void dia_gritta_perm3u4u5_war()
{
	AI_Output(other,self,"DIA_Gritta_Perm3U4U5_War_15_00");	//To je v·lka - takovÈ vÏci se st·vajÌ.
	AI_Output(self,other,"DIA_Gritta_Perm3U4U5_War_16_01");	//Ano, za vöechno m˘ûe tahle straön· v·lka. Kaûd˝ nÏjak trpÌ a zajÌm· ho, jak se s tÌm vöÌm vypo¯·dajÌ.
	AI_Output(self,other,"DIA_Gritta_Perm3U4U5_War_16_02");	//ObËas se pt·m sama sebe, zaË n·s Innos takhle trest·.
};

func void dia_gritta_perm3u4u5_turnsgood()
{
	AI_Output(other,self,"DIA_Gritta_Perm3U4U5_TurnsGood_15_00");	//To bude v po¯·dku.
	AI_Output(self,other,"DIA_Gritta_Perm3U4U5_TurnsGood_16_01");	//To je od tebe hezkÈ, ûe mÏ chceö povzbudit.
	if(GRITTAXP_ONCE == FALSE)
	{
		b_giveplayerxp(XP_AMBIENT);
		GRITTAXP_ONCE = TRUE;
	};
};

func void dia_gritta_perm3u4u5_rumors()
{
	AI_Output(other,self,"DIA_Gritta_Perm3U4U5_Rumors_15_00");	//Co jsi zaslechla?
	AI_Output(self,other,"DIA_Gritta_Perm3U4U5_Rumors_16_01");	//Jenom to, co si vypr·vÏjÌ lidÈ na ulici.
	AI_Output(self,other,"DIA_Gritta_Perm3U4U5_Rumors_16_02");	//Pr˝ uû chytli toho vraha, ale ne¯eknu ti, jestli je to pravda.
};

